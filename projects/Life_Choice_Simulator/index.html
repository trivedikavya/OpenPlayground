<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Choice Simulator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            width: 100%;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.8rem;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .simulation-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .progress-indicator {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            flex-grow: 1;
            margin: 0 20px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            border-radius: 4px;
            transition: width 0.8s ease;
        }
        
        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 2;
        }
        
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #ecf0f1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #7f8c8d;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 5px rgba(0,0,0,0.1);
        }
        
        .step-circle.active {
            background-color: #3498db;
            color: white;
            transform: scale(1.1);
        }
        
        .step-circle.completed {
            background-color: #2ecc71;
            color: white;
        }
        
        .scenario-card {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, opacity 0.5s ease;
            opacity: 1;
        }
        
        .scenario-card.hidden {
            display: none;
        }
        
        .scenario-title {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        
        .scenario-description {
            color: #555;
            line-height: 1.7;
            font-size: 1.2rem;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .choices-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .choice-option {
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .choice-option:hover {
            transform: translateY(-5px);
            border-color: #3498db;
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.15);
        }
        
        .choice-option:active {
            transform: translateY(-2px);
        }
        
        .choice-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #3498db;
            text-align: center;
        }
        
        .choice-text {
            font-size: 1.1rem;
            line-height: 1.5;
            flex-grow: 1;
        }
        
        .results-dashboard {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            display: none;
            margin-bottom: 30px;
        }
        
        .dashboard-title {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 2rem;
            text-align: center;
        }
        
        .factor-bars {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .factor {
            display: flex;
            align-items: center;
        }
        
        .factor-name {
            width: 100px;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .factor-icon {
            font-size: 1.3rem;
        }
        
        .bar-container {
            flex-grow: 1;
            height: 30px;
            background-color: #ecf0f1;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .bar-fill {
            height: 100%;
            border-radius: 15px;
            width: 0%;
            transition: width 1.5s ease;
            position: relative;
        }
        
        .bar-value {
            position: absolute;
            right: 15px;
            top: 0;
            height: 100%;
            display: flex;
            align-items: center;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stress-bar {
            background: linear-gradient(90deg, #e74c3c, #f1948a);
        }
        
        .growth-bar {
            background: linear-gradient(90deg, #2ecc71, #58d68d);
        }
        
        .time-bar {
            background: linear-gradient(90deg, #3498db, #85c1e9);
        }
        
        .happiness-bar {
            background: linear-gradient(90deg, #f39c12, #f7dc6f);
        }
        
        .summary-message {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            border-left: 5px solid #3498db;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        button {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .primary-btn {
            background-color: #3498db;
            color: white;
        }
        
        .primary-btn:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(52, 152, 219, 0.3);
        }
        
        .secondary-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .secondary-btn:hover {
            background-color: #27ae60;
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(46, 204, 113, 0.3);
        }
        
        .replay-btn {
            background-color: #9b59b6;
            color: white;
        }
        
        .replay-btn:hover {
            background-color: #8e44ad;
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(155, 89, 182, 0.3);
        }
        
        .hidden {
            display: none;
        }
        
        .feedback-message {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #2ecc71;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            font-weight: 600;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
            z-index: 1000;
        }
        
        .feedback-message.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .stats-preview {
            display: flex;
            justify-content: space-around;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 15px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .choices-container {
                grid-template-columns: 1fr;
            }
            
            .progress-indicator {
                flex-direction: column;
                gap: 15px;
            }
            
            .progress-bar {
                width: 100%;
                margin: 10px 0;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .controls {
                flex-direction: column;
            }
        }
        
        .footer {
            margin-top: 30px;
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9rem;
            padding: 20px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-seedling"></i> Life Choice Simulator</h1>
            <p class="subtitle">Everyday decisions often have hidden consequences. Make choices in real-life scenarios and discover their impact on your stress, growth, time, and happiness.</p>
        </header>
        
        <main class="simulation-container">
            <div class="progress-indicator">
                <div class="progress-step">
                    <div class="step-circle active">1</div>
                    <div>Scenario 1</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-step">
                    <div class="step-circle">2</div>
                    <div>Scenario 2</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <div class="progress-step">
                    <div class="step-circle">3</div>
                    <div>Scenario 3</div>
                </div>
            </div>
            
            <div class="scenario-card" id="scenario-1">
                <h2 class="scenario-title">The All-Nighter Dilemma</h2>
                <p class="scenario-description">You have a major exam tomorrow morning worth 40% of your grade. You're not fully prepared and it's already 10 PM. You could pull an all-nighter to study, but you know you have another important class at 9 AM the next day.</p>
                
                <div class="choices-container">
                    <div class="choice-option" data-choice="1">
                        <div class="choice-icon"><i class="fas fa-coffee"></i></div>
                        <p class="choice-text">Pull an all-nighter with energy drinks and coffee. You'll cover more material but risk exhaustion.</p>
                    </div>
                    <div class="choice-option" data-choice="2">
                        <div class="choice-icon"><i class="fas fa-bed"></i></div>
                        <p class="choice-text">Study until midnight, then get 6 hours of sleep. You'll be rested but might not cover everything.</p>
                    </div>
                    <div class="choice-option" data-choice="3">
                        <div class="choice-icon"><i class="fas fa-calendar-check"></i></div>
                        <p class="choice-text">Study for 2 hours, wake up early at 5 AM to study more. Balanced approach with some rest.</p>
                    </div>
                </div>
            </div>
            
            <div class="scenario-card hidden" id="scenario-2">
                <h2 class="scenario-title">The Group Project Challenge</h2>
                <p class="scenario-description">Your group project is due in two days, but one team member hasn't completed their part. The rest of the group is divided on how to handle the situation.</p>
                
                <div class="choices-container">
                    <div class="choice-option" data-choice="1">
                        <div class="choice-icon"><i class="fas fa-user-friends"></i></div>
                        <p class="choice-text">Cover for the teammate and do their work yourself to ensure the project is completed on time.</p>
                    </div>
                    <div class="choice-option" data-choice="2">
                        <div class="choice-icon"><i class="fas fa-exclamation-triangle"></i></div>
                        <p class="choice-text">Confront the teammate and demand they complete their part immediately, reporting them if they don't.</p>
                    </div>
                    <div class="choice-option" data-choice="3">
                        <div class="choice-icon"><i class="fas fa-handshake"></i></div>
                        <p class="choice-text">Call a group meeting to redistribute the work fairly and set clear expectations for everyone.</p>
                    </div>
                </div>
            </div>
            
            <div class="scenario-card hidden" id="scenario-3">
                <h2 class="scenario-title">The Social vs Career Opportunity</h2>
                <p class="scenario-description">You've been invited to a networking event with industry professionals that could lead to internship opportunities. The same evening, your close friend is having a birthday celebration they've been planning for weeks.</p>
                
                <div class="choices-container">
                    <div class="choice-option" data-choice="1">
                        <div class="choice-icon"><i class="fas fa-briefcase"></i></div>
                        <p class="choice-text">Attend the networking event. Career opportunities are important for your future growth.</p>
                    </div>
                    <div class="choice-option" data-choice="2">
                        <div class="choice-icon"><i class="fas fa-birthday-cake"></i></div>
                        <p class="choice-text">Go to your friend's birthday. Maintaining strong relationships is key to long-term happiness.</p>
                    </div>
                    <div class="choice-option" data-choice="3">
                        <div class="choice-icon"><i class="fas fa-balance-scale"></i></div>
                        <p class="choice-text">Split your time: attend the networking event for an hour, then join the birthday celebration later.</p>
                    </div>
                </div>
            </div>
            
            <div class="results-dashboard" id="results-dashboard">
                <h2 class="dashboard-title">Your Life Balance Results</h2>
                
                <div class="stats-preview">
                    <div class="stat-item">
                        <div class="stat-value" id="final-stress">0</div>
                        <div class="stat-label">Stress</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="final-growth">0</div>
                        <div class="stat-label">Growth</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="final-time">0</div>
                        <div class="stat-label">Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="final-happiness">0</div>
                        <div class="stat-label">Happiness</div>
                    </div>
                </div>
                
                <div class="factor-bars">
                    <div class="factor">
                        <div class="factor-name">
                            <i class="fas fa-brain factor-icon"></i> Stress
                        </div>
                        <div class="bar-container">
                            <div class="bar-fill stress-bar" id="stress-bar"></div>
                            <div class="bar-value" id="stress-value">0</div>
                        </div>
                    </div>
                    <div class="factor">
                        <div class="factor-name">
                            <i class="fas fa-chart-line factor-icon"></i> Growth
                        </div>
                        <div class="bar-container">
                            <div class="bar-fill growth-bar" id="growth-bar"></div>
                            <div class="bar-value" id="growth-value">0</div>
                        </div>
                    </div>
                    <div class="factor">
                        <div class="factor-name">
                            <i class="fas fa-clock factor-icon"></i> Time
                        </div>
                        <div class="bar-container">
                            <div class="bar-fill time-bar" id="time-bar"></div>
                            <div class="bar-value" id="time-value">0</div>
                        </div>
                    </div>
                    <div class="factor">
                        <div class="factor-name">
                            <i class="fas fa-smile factor-icon"></i> Happiness
                        </div>
                        <div class="bar-container">
                            <div class="bar-fill happiness-bar" id="happiness-bar"></div>
                            <div class="bar-value" id="happiness-value">0</div>
                        </div>
                    </div>
                </div>
                
                <div class="summary-message" id="summary-message">
                    Your choices show a balanced approach to life's challenges. Keep reflecting on how your decisions affect different aspects of your wellbeing.
                </div>
                
                <div class="controls">
                    <button class="replay-btn" id="replay-btn">
                        <i class="fas fa-redo"></i> Play Again
                    </button>
                </div>
            </div>
            
            <div class="controls" id="action-controls">
                <button class="secondary-btn" id="next-btn" disabled>
                    <i class="fas fa-arrow-right"></i> Next Scenario
                </button>
            </div>
        </main>
        
        <div class="feedback-message" id="feedback-message">
            Choice selected! Your impacts are being calculated...
        </div>
        
        <div class="footer">
            <p>Life Choice Simulator &copy; 2023 | Explore different paths to discover how your decisions affect your life balance.</p>
        </div>
    </div>

    <script>
        // State management
        const state = {
            currentScenario: 1,
            totalScenarios: 3,
            scores: {
                stress: 50,
                growth: 50,
                time: 50,
                happiness: 50
            },
            choices: [],
            scenarios: [
                {
                    id: 1,
                    title: "The All-Nighter Dilemma",
                    choices: [
                        {
                            id: 1,
                            text: "Pull an all-nighter with energy drinks and coffee",
                            impacts: { stress: 20, growth: 15, time: -10, happiness: -15 }
                        },
                        {
                            id: 2,
                            text: "Study until midnight, then get 6 hours of sleep",
                            impacts: { stress: -5, growth: 5, time: 5, happiness: 5 }
                        },
                        {
                            id: 3,
                            text: "Study for 2 hours, wake up early at 5 AM to study more",
                            impacts: { stress: 10, growth: 10, time: 0, happiness: 0 }
                        }
                    ]
                },
                {
                    id: 2,
                    title: "The Group Project Challenge",
                    choices: [
                        {
                            id: 1,
                            text: "Cover for the teammate and do their work yourself",
                            impacts: { stress: 15, growth: 5, time: -20, happiness: -10 }
                        },
                        {
                            id: 2,
                            text: "Confront the teammate and demand they complete their part",
                            impacts: { stress: 10, growth: 0, time: 5, happiness: -5 }
                        },
                        {
                            id: 3,
                            text: "Call a group meeting to redistribute the work fairly",
                            impacts: { stress: -5, growth: 10, time: 0, happiness: 5 }
                        }
                    ]
                },
                {
                    id: 3,
                    title: "The Social vs Career Opportunity",
                    choices: [
                        {
                            id: 1,
                            text: "Attend the networking event",
                            impacts: { stress: 5, growth: 20, time: -10, happiness: -5 }
                        },
                        {
                            id: 2,
                            text: "Go to your friend's birthday",
                            impacts: { stress: -10, growth: -5, time: 5, happiness: 15 }
                        },
                        {
                            id: 3,
                            text: "Split your time between both events",
                            impacts: { stress: 0, growth: 10, time: -5, happiness: 10 }
                        }
                    ]
                }
            ]
        };

        // DOM Elements
        const scenarioCards = document.querySelectorAll('.scenario-card');
        const progressFill = document.getElementById('progress-fill');
        const stepCircles = document.querySelectorAll('.step-circle');
        const nextBtn = document.getElementById('next-btn');
        const replayBtn = document.getElementById('replay-btn');
        const resultsDashboard = document.getElementById('results-dashboard');
        const feedbackMessage = document.getElementById('feedback-message');
        const actionControls = document.getElementById('action-controls');
        
        // Factor bars and values
        const stressBar = document.getElementById('stress-bar');
        const growthBar = document.getElementById('growth-bar');
        const timeBar = document.getElementById('time-bar');
        const happinessBar = document.getElementById('happiness-bar');
        
        const stressValue = document.getElementById('stress-value');
        const growthValue = document.getElementById('growth-value');
        const timeValue = document.getElementById('time-value');
        const happinessValue = document.getElementById('happiness-value');
        
        const finalStress = document.getElementById('final-stress');
        const finalGrowth = document.getElementById('final-growth');
        const finalTime = document.getElementById('final-time');
        const finalHappiness = document.getElementById('final-happiness');
        
        const summaryMessage = document.getElementById('summary-message');

        // Initialize the simulation
        function initSimulation() {
            // Reset state
            state.currentScenario = 1;
            state.scores = { stress: 50, growth: 50, time: 50, happiness: 50 };
            state.choices = [];
            
            // Hide all scenario cards except the first one
            scenarioCards.forEach(card => {
                card.classList.add('hidden');
            });
            document.getElementById(`scenario-${state.currentScenario}`).classList.remove('hidden');
            
            // Reset progress indicator
            progressFill.style.width = '0%';
            stepCircles.forEach((circle, index) => {
                circle.classList.remove('active', 'completed');
                if (index === 0) {
                    circle.classList.add('active');
                }
            });
            
            // Hide results dashboard
            resultsDashboard.style.display = 'none';
            actionControls.style.display = 'flex';
            
            // Reset button state
            nextBtn.disabled = true;
            
            // Attach event listeners to choice options
            attachChoiceListeners();
            
            console.log("Simulation initialized. Starting scores:", state.scores);
        }

        // Attach event listeners to choice options
        function attachChoiceListeners() {
            const choiceOptions = document.querySelectorAll('.choice-option');
            
            choiceOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const scenarioId = state.currentScenario;
                    const choiceId = parseInt(this.getAttribute('data-choice'));
                    
                    // Find the selected choice
                    const currentScenario = state.scenarios.find(s => s.id === scenarioId);
                    const selectedChoice = currentScenario.choices.find(c => c.id === choiceId);
                    
                    if (selectedChoice) {
                        // Record the choice
                        state.choices.push({
                            scenarioId,
                            choiceId,
                            impacts: selectedChoice.impacts
                        });
                        
                        // Update scores
                        updateScores(selectedChoice.impacts);
                        
                        // Show feedback
                        showFeedback(`Choice selected! ${getImpactDescription(selectedChoice.impacts)}`);
                        
                        // Enable next button
                        nextBtn.disabled = false;
                        
                        // Visual feedback for selected choice
                        choiceOptions.forEach(opt => opt.style.opacity = '0.6');
                        this.style.opacity = '1';
                        this.style.borderColor = '#3498db';
                        this.style.boxShadow = '0 10px 20px rgba(52, 152, 219, 0.3)';
                    }
                });
            });
        }

        // Update scores based on choice impacts
        function updateScores(impacts) {
            // Update each factor with boundaries (0-100)
            for (const factor in impacts) {
                state.scores[factor] += impacts[factor];
                state.scores[factor] = Math.max(0, Math.min(100, state.scores[factor]));
            }
            
            console.log("Updated scores:", state.scores);
        }

        // Get a description of the impacts for feedback
        function getImpactDescription(impacts) {
            const descriptions = [];
            
            if (impacts.stress > 0) descriptions.push(`Stress +${impacts.stress}`);
            if (impacts.stress < 0) descriptions.push(`Stress ${impacts.stress}`);
            
            if (impacts.growth > 0) descriptions.push(`Growth +${impacts.growth}`);
            if (impacts.growth < 0) descriptions.push(`Growth ${impacts.growth}`);
            
            if (impacts.time > 0) descriptions.push(`Time +${impacts.time}`);
            if (impacts.time < 0) descriptions.push(`Time ${impacts.time}`);
            
            if (impacts.happiness > 0) descriptions.push(`Happiness +${impacts.happiness}`);
            if (impacts.happiness < 0) descriptions.push(`Happiness ${impacts.happiness}`);
            
            return descriptions.join(', ');
        }

        // Show feedback message
        function showFeedback(message) {
            feedbackMessage.textContent = message;
            feedbackMessage.classList.add('show');
            
            setTimeout(() => {
                feedbackMessage.classList.remove('show');
            }, 3000);
        }

        // Move to the next scenario
        function nextScenario() {
            // Update progress indicator
            stepCircles[state.currentScenario - 1].classList.remove('active');
            stepCircles[state.currentScenario - 1].classList.add('completed');
            
            // Calculate progress percentage
            const progressPercentage = (state.currentScenario / state.totalScenarios) * 100;
            progressFill.style.width = `${progressPercentage}%`;
            
            // Hide current scenario with animation
            const currentCard = document.getElementById(`scenario-${state.currentScenario}`);
            currentCard.style.opacity = '0';
            currentCard.style.transform = 'translateX(-20px)';
            
            setTimeout(() => {
                currentCard.classList.add('hidden');
                currentCard.style.opacity = '1';
                currentCard.style.transform = 'translateX(0)';
                
                // Move to next scenario or show results
                state.currentScenario++;
                
                if (state.currentScenario <= state.totalScenarios) {
                    // Show next scenario
                    const nextCard = document.getElementById(`scenario-${state.currentScenario}`);
                    nextCard.classList.remove('hidden');
                    
                    // Update progress circle
                    stepCircles[state.currentScenario - 1].classList.add('active');
                    
                    // Reset choice options opacity
                    const choiceOptions = document.querySelectorAll('.choice-option');
                    choiceOptions.forEach(opt => {
                        opt.style.opacity = '1';
                        opt.style.borderColor = '#e9ecef';
                        opt.style.boxShadow = 'none';
                    });
                    
                    // Disable next button until choice is made
                    nextBtn.disabled = true;
                } else {
                    // Show results dashboard
                    showResults();
                }
            }, 500);
        }

        // Show final results
        function showResults() {
            // Hide scenario and action controls
            actionControls.style.display = 'none';
            
            // Show dashboard
            resultsDashboard.style.display = 'block';
            
            // Update factor values
            finalStress.textContent = state.scores.stress;
            finalGrowth.textContent = state.scores.growth;
            finalTime.textContent = state.scores.time;
            finalHappiness.textContent = state.scores.happiness;
            
            // Animate the bars
            setTimeout(() => {
                stressBar.style.width = `${state.scores.stress}%`;
                growthBar.style.width = `${state.scores.growth}%`;
                timeBar.style.width = `${state.scores.time}%`;
                happinessBar.style.width = `${state.scores.happiness}%`;
                
                // Update the values with animation
                animateValue(stressValue, 0, state.scores.stress, 1500);
                animateValue(growthValue, 0, state.scores.growth, 1500);
                animateValue(timeValue, 0, state.scores.time, 1500);
                animateValue(happinessValue, 0, state.scores.happiness, 1500);
            }, 300);
            
            // Generate summary message based on scores
            generateSummaryMessage();
        }

        // Animate value counting up
        function animateValue(element, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                element.textContent = value;
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Generate a summary message based on final scores
        function generateSummaryMessage() {
            let message = "";
            
            // Determine overall balance
            const totalScore = state.scores.stress + state.scores.growth + state.scores.time + state.scores.happiness;
            const averageScore = totalScore / 4;
            
            if (averageScore >= 70) {
                message = "Excellent balance! Your choices demonstrate a healthy approach to managing life's challenges while prioritizing growth and happiness.";
            } else if (averageScore >= 50) {
                message = "Good balance overall. You're managing the different aspects of your life reasonably well, with some room for optimization.";
            } else {
                message = "Your results suggest some areas need attention. Consider how you might better balance stress, growth, time, and happiness in your decisions.";
            }
            
            // Add specific feedback based on highest and lowest scores
            const factors = Object.entries(state.scores);
            factors.sort((a, b) => b[1] - a[1]);
            
            const highest = factors[0];
            const lowest = factors[3];
            
            message += ` Your highest score is ${highest[0]} (${highest[1]}) and your lowest is ${lowest[0]} (${lowest[1]}).`;
            
            summaryMessage.textContent = message;
        }

        // Randomize scenarios for replay
        function randomizeScenarios() {
            // Clone the scenarios array
            const shuffled = [...state.scenarios];
            
            // Fisher-Yates shuffle algorithm
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            
            // Take only the first 3 scenarios (or all if less than 3)
            state.scenarios = shuffled.slice(0, 3);
            
            // Update the scenario cards with new titles and descriptions
            state.scenarios.forEach((scenario, index) => {
                const scenarioCard = document.getElementById(`scenario-${index + 1}`);
                const titleElement = scenarioCard.querySelector('.scenario-title');
                const descriptionElement = scenarioCard.querySelector('.scenario-description');
                
                titleElement.textContent = scenario.title;
                
                // Set appropriate description based on scenario
                if (scenario.id === 1) {
                    descriptionElement.textContent = "You have a major exam tomorrow morning worth 40% of your grade. You're not fully prepared and it's already 10 PM. You could pull an all-nighter to study, but you know you have another important class at 9 AM the next day.";
                } else if (scenario.id === 2) {
                    descriptionElement.textContent = "Your group project is due in two days, but one team member hasn't completed their part. The rest of the group is divided on how to handle the situation.";
                } else if (scenario.id === 3) {
                    descriptionElement.textContent = "You've been invited to a networking event with industry professionals that could lead to internship opportunities. The same evening, your close friend is having a birthday celebration they've been planning for weeks.";
                }
            });
            
            showFeedback("Scenarios randomized! Try a different set of life choices.");
        }

        // Event Listeners
        nextBtn.addEventListener('click', nextScenario);
        
        replayBtn.addEventListener('click', function() {
            // Randomize scenarios for replayability
            randomizeScenarios();
            // Reset the simulation
            initSimulation();
        });

        // Initialize the simulation when page loads
        document.addEventListener('DOMContentLoaded', initSimulation);
    </script>
</body>
</html>